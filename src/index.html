<!DOCTYPE html>
<html lang="en" ng-app='app'>
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/></head>
    <meta name="author" content="Hugo Ruscitti"/>

    <title>Huayra StopMotion</title>

    <link href="css/bootstrap.css" rel="stylesheet" />
    <link href="css/theme.css" rel="stylesheet" />
    <link href="css/theme-helper.css" rel="stylesheet" />
    <link href="css/theme-icon.css" rel="stylesheet" />
    <link href="css/font-awesome.css" rel="stylesheet" />
    <link href="css/animate.css" rel="stylesheet" />
    <link href="css/uniform.default.css" rel="stylesheet" />
    <link href="css/custom.css" rel="stylesheet" />
  </head>

  <body ng-controller='AppCtrl'>

    <!-- PANEL INICIAL MIENTRAS CARGA LA APLICACION -->
    <div class='loading'>
      <img src='./img/vaca.gif'/>
      <br/>
      <br/>
      iniciando ...
    </div>






    <!-- PANEL DE AYUDA -->
    <div class='ayuda ayuda-invisible' id='ayuda'>

      <div class='ayuda-contenido'>
        <h1>Atajos de teclado</h1>

        <ul>
          <li><div class='tecla'>h</div> Muestra esta ayuda.</li>
          <li><div class='tecla'>n</div> Oculta el panel lateral.</li>
          <li><div class='tecla'>Espacio</div> Captura un cuadro de animación.</li>
          <li><div class='tecla'>→</div> Avanzar un cuadro.</li>
          <li><div class='tecla'>←</div> Retroceder un cuadro.</li>
          <li><div class='tecla'>↓</div> Ir al último cuadro.</li>
          <li><div class='tecla'>↑</div> Ir al primer cuadro.</li>
        </ul>
      </div>

    </div>





    <!-- SONIDOS -->
    <audio id="audio_foto">
        <source src="sonidos/foto.ogg" type="audio/ogg">
    </audio>

    <section class="section">

        <!-- SELECTOR DE CAMARAS -->
        <div id='content' class="content">
          <div class="sidebar-camara">
            <ul class="sr-control-item">

              <li class="active"><a ng-click="seleccionar_camara(1)" href="#" data-toggle="tab"><i class="icon-camera"></i> Cámara 1</a></li>
              <li ng-repeat='c in camaras'><a ng-click="seleccionar_tab(c.indice)" href="#alt{{c.indice}}" data-toggle="tab"><i class="icon-camera"></i> Cámara {{c.indice}}</a></li>

            </ul>
          </div>
        </div>
  
        <!-- PANEL DE CONTENIDOS PRINCIPAL -->
        <div class="content-body" id='content-body'>
          <div class='contenedor-izquierdo'>
            <div class='contenedor-layers' id='contenedor-layers'>
              <!-- cuadro fantasma -->

              <table class='grilla'>
                {{capa_grilla_cantidad_columnas}}
                  <tr ng-repeat='f in getNumber(capa_grilla_cantidad_filas) track by $index'>
                    <td ng-repeat='c in getNumber(capa_grilla_cantidad_columnas) track by $index'>&nbsp;</td>
                  </tr>
              </table>

              <canvas ng-show='fantasma' style='opacity: {{fantasma_opacidad/100}}' id='canvas' width=640 height=480></canvas>

              <!-- capas overlay -->
              <img src='app://./images/capas/guias.png' style='opacity: {{capa_guia_opacidad/100}}'>
              <img src='app://./images/capas/grilla.png' style='opacity: {{capa_grilla_opacidad/100}}'>

              <!-- el video capturado de la camara -->
              <video autoplay loop="true"></video>
            </div>
          </div>

          <!-- PANEL CON BOTONES DE CAPTURA DEBADO DEL VIDEO -->
          <div id="contenedor-controles">
            <button class='btn btn-danger' ng-click='capturar()'> <span class="icon-plus icon-white"></span>Foto</button>
          </div>

        </div>

        <!-- PANEL LATERAR CON OPCIONES DE PROYECTO, EFECTOS Y CAPAS -->
        <aside id='panel-lateral' class="side-right">

          <div class="sidebar-right">

            <!-- SELECTORES DE SECCIONES TIPO TABS -->
            <div class="sidebar-right-control">
              <ul class="sr-control-item">
                <li class="active"><a ng-click="seleccionar_tab(1)" href="#" data-toggle="tab"><i class="icon-film"></i> Proyecto</a></li>
                <li><a href="#" ng-click="seleccionar_tab(2)" data-toggle="tab"> ... </a></li>
                <li><a href="#" ng-click="seleccionar_tab(3)" data-toggle="tab"><i class="icon-align-justify"></i> Capas</a></li>
                <li><a href="#" ng-click="seleccionar_tab(4)" data-toggle="tab"><i class="icon-eye-open"></i> Efectos</a></li>
                <li><a href="#" ng-click="seleccionar_tab(5)" data-toggle="tab"><i class="icon-wrench"></i> Opciones</a></li>
              </ul>
            </div>

            <!-- CONTENIDO DEL PANEL LATERAL -->
            <div class="sidebar-right-content">
              <div class="tab-content">

                <!-- TAB 1: PROYECTO -->
                <div ng-class="{'oculto': tab_seleccionado != 'tab1'}">
                  <div class="side-box">

                    <div class="control-group">
                      <label class="control-label" for="titulo">Título del proyecto</label>
                      <div class="controls">
                        <input id='titulo' ng-model='titulo'></input>
                      </div>
                    </div>

                    <div class="control-group">
                      <label class="control-label" for="titulo">Detalles</label>

                      <div class="controls">
                        <p ng-show='cuadros.length < 1'>Esta animación no tiene cuadros aún.</p>
                        <p ng-show='cuadros.length == 1'><strong>{{cuadros.length}}</strong> solo cuadro de animación.</p>
                        <p ng-show='cuadros.length > 1'><strong>{{cuadros.length}}</strong> cuadros de animación en total.</p>
                      </div>


                      <div class="controls">
                        <a ng-disabled='cuadros.length < 1' ng-click='generar_video()' class='btn btn-success'>Generar video</a>

                        <button class='btn' ng-click='abrir_directorio_destino()'>Explorar directorio</button>            
                      </div>


                    </div>
                  </div>
                </div>

                <!-- TAB 2: FANTASMA -->
                <div ng-class="{'oculto': tab_seleccionado != 'tab2'}">
                  <div class="side-box">


                    <div class="alert">
                      <button type="button" class="close" data-dismiss="alert">&times;</button>
                      <div>Este panel está libre por el momento ...</div>

                      <div>El deslizador para el modo fantasma ahora está en la sección capas, con el nombre
                      capa de cebolla.</div>
                    </div>

                  </div>

                </div>

                <!-- TAB 3: CAPAS -->
                <div ng-class="{'oculto': tab_seleccionado != 'tab3'}">
                  <div class="side-box">           

                    <div class="control-group">
                      <label class="control-label" for="capa_guia_opacidad">Guia</label>
                      <div class="controls">
                        <input type='range' step="5" min="0" max="100" ng-model="capa_guia_opacidad"></input>
                        <span class='nota'>{{capa_guia_opacidad}}</span>
                      </div>
                    </div>

                    <div class="control-group">
                      <label class="control-label" for="capa_guia_opacidad">Grilla</label>

                      <div class="controls">
                        <input type='range' step="5" min="0" max="100" ng-model="capa_grilla_opacidad"></input>
                        <span class='nota'>{{capa_grilla_opacidad}}</span>
                      </div>


                      <div class='inner-control'>
                        <div class="control-group">
                          Filas
                          <input ng-disabled='capa_grilla_opacidad == 0' ng-model='capa_grilla_cantidad_filas' type='range' step="1" min="0" max="12"></input>
                        </div>

                        <div class="control-group">
                          Columnas:
                          <input ng-disabled='capa_grilla_opacidad == 0' ng-model='capa_grilla_cantidad_columnas' type='range' step="1" min="0" max="12"></input>
                        </div>
                      </div>


                    </div>


                    <div class="control-group">
                      <label class="control-label" for="capa_circulo_opacidad">Opacidad de la capa de cebolla</label>
                      <div class="controls">
                        <input ng-disabled='cuadros.length == 0' type='range' step="5" min="0" max="100" ng-model="fantasma_opacidad"></input>
                        <span class='nota'>{{fantasma_opacidad}}</span>
                      </div>

                    </div>


                    <!-- Control para deshabilitar las capas -->

                    <div class="control-group">
                      <br/>
                      <div class="controls">
                        <button class='btn' ng-click='deshabilitar_capas()'>Deshabilitar capas</button>            
                      </div>
                    </div>


                  </div>
                </div>

                <!-- TAB 4: EFECTOS -->
                <div ng-class="{'oculto': tab_seleccionado != 'tab4'}">
                  <div class="side-box">

                    <div class="control-group">
                      <label class="control-label" for="brillo">Brillo</label>
                      <div class="controls">
                        <input type='range' step="5" min="0" max="100" ng-model="brillo"></input>
                        <span class='nota'>{{brillo}}</span>
                      </div>
                    </div>

                    <div class="control-group">
                      <label class="control-label" for="contraste">Contraste</label>
                      <div class="controls">
                        <input type='range' step="5" min="0" max="100" ng-model="contraste"></input>
                        <span class='nota'>{{contraste}}</span>
                      </div>
                    </div>

                    <div class="control-group">
                      <label class="control-label" for="borrosidad">Borrosidad</label>
                      <div class="controls">
                        <input type='range' step="5" min="0" max="100" ng-model="borrosidad"></input>
                        <span class='nota'>{{borrosidad}}</span>
                      </div>
                    </div>

                    <div class="control-group">
                      <br/>
                      <div class="controls">
                        <button class='btn' ng-click='restaurar()'>Restaurar valores iniciales</button>            
                      </div>
                    </div>
                  </div>
                </div>

                <!-- TAB 5: OPCIONES -->
                <div ng-class="{'oculto': tab_seleccionado != 'tab5'}">
                  <div class="side-box">

                    <div class="control-group">
                      <label class="control-label" for="sonidos">Sonidos Habilitados</label>
                      <div class="controls">
                        <input ng-model='sonido_habilitado' type='checkbox'></input>
                      </div>
                    </div>

                    <div class="control-group">
                      <label class="control-label" for="desarrollo">Modo desarrollador</label>
                      <div class="controls">
                        <button id='desarrollo' ng-click="abrir_modo_desarrollador()" class='btn btn-sucess'>Abrir modo desarrollador</button>
                      </div>
                    </div>

                  </div>
                </div>


              </div>
            </div>
          </div>
        </aside>
    </section>




<div class='toolbar'>
	<button class='boton-plano' ng-click='pulsa_boton_alternar_panel()' ng-model='panel_visible' ng-class="{'btn-pulsado': panel_visible, 'btn-normal': !panel_visible}"><i class='icon  icon-tasks'></i></button>
</div>




    <!-- LINEA DE TIEMPO CON TODOS LOS CUADROS DE ANIMACION -->
    <footer>


		<div class="wrap">

			<div class="scrollbar">
				<div class="handle">
					<div class="mousearea"></div>
				</div>
			</div>

			<div class="frame" id="basic">
				<ul class="clearfix">
				</ul>
			</div>

			<ul class="pages"></ul>
			
    </div>

    </footer>

    <script src="js/jquery.js"></script>
    <script src="js/jquery.sortable.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/angular.js"></script>
    <script src="js/angular-animate.js"></script>
    <script src='js/libs/ui-bootstrap-tpls-0.6.0.js'></script>
    <script src="js/keymaster.js"></script>
    <script src="js/app.js"></script>
    <script src="js/video.js"></script>
    <script src="js/sly.js"></script>
    <script src="js/plugins.js"></script>

		<script>
		 var Gaze = require('gaze').Gaze;
		 var gaze = new Gaze('**/*');
		
		 gaze.on('all', function(event, filepath) {
			 if (location)
				 location.reload();
		 });
		</script>

  </body>
</html>
