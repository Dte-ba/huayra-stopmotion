<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  
    <title>Index</title>
    <style type="text/css" media="all">
      body {
        font-family: sans-serif;
      }

      video {
        width: 50%;
        border: 2px solid #ccc;
      }

    </style>

    <script src="/js/socket.io.js"></script>

    <script>
      var socket = io.connect('http://localhost');

      socket.on('connect', function () {
        //socket.emit('set nickname', prompt('What is your nickname?'));

          setInterval(function() {
            socket.emit("mensaje", {nombre: "tick"});
          }, 3000);

      });

      window.socket = socket;
    </script>

  </head>
<body>

<h1>Captura de video</h1>

<p>Esta ventana est√° capturando el video del equipo
para compartirlo con huayra stop-motion.</p>

<video autoplay></video>

<p>Para finalizar la captura, solo cierra la ventana.</p>

<script type="text/javascript" charset="utf-8">
  var onFailSoHard = function(e) {
    var video = document.querySelector('video');
    video.play();
  };

  window.URL = window.URL || window.webkitURL;
  navigator.getUserMedia  = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;

  var video = document.querySelector('video');

  if (navigator.getUserMedia) {
    navigator.getUserMedia({audio: false, video: true}, function(stream) {
      video.src = window.URL.createObjectURL(stream);
    }, onFailSoHard);
  } else {
    alert("ERROR: es importante aceptar el pedido de la webcam.");
  }
</script>
</body>
</html>
